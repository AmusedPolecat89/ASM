# ASM

[![PR Validation](https://img.shields.io/github/actions/workflow/status/example/asm/pr-validation.yml?label=PR%20validation)](https://github.com/example/asm/actions/workflows/pr-validation.yml)
[![Nightly](https://img.shields.io/github/actions/workflow/status/example/asm/nightly.yml?label=nightly)](https://github.com/example/asm/actions/workflows/nightly.yml)
[![Paper](https://img.shields.io/github/actions/workflow/status/example/asm/paper.yml?label=paper)](https://github.com/example/asm/actions/workflows/paper.yml)
[![DOI](https://img.shields.io/badge/doi-10.5281%2Fzenodo.placeholder-blue)](https://doi.org/10.5281/zenodo.placeholder)
[![License: MIT](https://img.shields.io/badge/license-MIT-lightgrey.svg)](LICENSE)

Core workspace for the ASM engine prototypes.

* [Phase 1 API](docs/phase1-api.md)
* [Phase 2 Graph API](crates/asm-graph/docs/phase2-graph-api.md)
* [Phase 3 Code API](crates/asm-code/docs/phase3-code-api.md)
* [Phase 4 Ensemble API](crates/asm-mcmc/docs/phase4-ensemble-api.md)
* [Phase 5 Automorphisms API](docs/phase5-aut-api.md)
* [Phase 6 RG API](docs/phase6-rg-api.md)
* [Phase 7 Experiment API](docs/phase7-exp-api.md)
* [Phase 9 Ablation API](docs/phase9-ablation-api.md)
* [Phase 11 Spectrum API](docs/phase11-spec-api.md)
* [Phase 12 Gauge API](docs/phase12-gauge-api.md)
* [Phase 13 Interaction API](docs/phase13-int-api.md)
* [Phase 14 Landscape API](docs/phase14-land-api.md)
* [Phase 15 Theory API](docs/phase15-thy-api.md)
* [Phase 16 Plugins](docs/phase16-plugins.md)
* [Phase 16 Dataset Registry](docs/phase16-registry.md)
* [Phase 16 Web Dashboards](docs/phase16-web.md)
* [CITATION metadata](docs/CITATION.cff)
* [Contributing Guide](docs/CONTRIBUTING.md)
* [Code of Conduct](docs/CODE_OF_CONDUCT.md)
* [Reproducibility Guide](docs/REPRODUCIBILITY.md)
* [Release Notes](docs/RELEASE_NOTES.md)

## CLI utilities

The `asm-sim` binary drives sampler executions and post-run analysis:

```bash
# Run an ensemble sweep from a YAML config and state manifest
asm-sim mcmc --config CONFIG.yaml --in state.json --out runs/example/

# Analyse a completed run directory and emit dispersion reports
asm-sim analyze --input runs/example/ --out runs/example/analysis/

# Inspect repository health before kicking off heavy workflows
asm-sim doctor --quiet

# Run a deterministic demo for CI smoke coverage
asm-sim demo --input replication/seeds/state_seed0

# Analyse a single state and emit spectrum reports
asm-sim spectrum --input fixtures/validation_vacua/t1_seed0/end_state/ \
  --out analysis/spectrum/t1_seed0 --k-points 64 --modes 3 --seed 11001

# Batch spectrum analysis for many vacua or checkpoints
asm-sim spectrum-batch --inputs fixtures/validation_vacua/**/end_state/ \
  --out analysis/spectra --k-points 64 --modes 3 --seed 12001

# Gauge algebra extraction for a single spectrum/automorphism pair
asm-sim gauge \
  --spectrum fixtures/phase11/t1_seed0/spectrum_report.json \
  --aut fixtures/phase12/analysis/t1_seed0/analysis_report.json \
  --out analysis/gauge/t1_seed0 --seed 13001

# Gauge analysis across many spectra with deterministic batching
asm-sim gauge-batch \
  --spectra "fixtures/phase11/**/spectrum_report.json" \
  --aut-glob "fixtures/phase12/analysis/**/analysis_report.json" \
  --out analysis/gauge/batch --seed 13002

# Show release metadata and tooling provenance
asm-sim version --long
```

## Replication Pack

The `replication/` directory contains a one-command reproduction of the v0.9 “preprint” experiment suite.

```bash
# native execution
./replication/run.sh

# or via the convenience make target
make -C replication run
```

Containerised runners are provided for parity with CI:

```bash
# docker compose (builds the image and runs the script)
docker compose -f docker/compose.yml up --build

# or manually build/run the image
docker build -f docker/Dockerfile -t asm-preprint:latest .
docker run --rm -v "$PWD":/work asm-preprint:latest bash replication/run.sh
```

To build the release candidate preprint and dashboards locally:

```bash
python3 scripts/render_dashboards.py --fixtures fixtures/phase10 --out dashboards
bash scripts/build_paper.sh
```

The generated paper embeds the git commit SHA and build date in the provenance
section to satisfy the Phase 10 reproducibility requirements.

## Ablation workflows

Deterministic ablation suites live under `ablation/`. Use the helper script to execute plans, append to the registry, and validate outputs against goldens.

```bash
scripts/run_ablation.sh ablation/plans/topo_vs_worm.yaml --seed 9001
```

Golden packs reside in `ablation/goldens/` and can be refreshed with:

```bash
python scripts/extract_goldens.py --plan ablation/plans/topo_vs_worm.yaml \
  --report ablation/out/topo_vs_worm/ablation_report.json
```

Dashboards generated by `scripts/render_dashboards.py` are stored in the
tracked `dashboards/` directory and automatically published as part of the
`paper.yml` release workflow.
